<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç”Ÿé…®é£²é£Ÿå°æ¸¬é©—ï½œç„¡å°é¢¨</title>
  <style>
    /* ç„¡å°é¢¨ï¼šç•™ç™½ã€è¼•è‰²ã€ç°¡å–®ç·šæ¢ */
    :root{
      --bg:#fafafa;--card:#ffffff;--ink:#222;--muted:#6b7280;--line:#e5e7eb;--ok:#16a34a;--err:#dc2626;--accent:#111827;
      --chip:#f3f4f6;--chip-border:#e5e7eb;--link:#0ea5e9;--code:#ef4444;--note:#9ca3af;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans",sans-serif;background:var(--bg);color:var(--ink);}
    .wrap{max-width:880px;margin:42px auto;padding:0 20px}
    h1{font-size:28px;font-weight:700;margin:0 0 16px;color:var(--accent)}
    p.lead{margin:0 0 24px;color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:20px 18px;margin-bottom:16px}
    .q-title{font-weight:700;margin-bottom:10px}
    .choices{display:grid;gap:10px;margin-top:8px}
    label.choice{display:flex;gap:10px;align-items:center;padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:#fff;cursor:pointer}
    label.choice:hover{background:#fcfcfc}
    .drag-area{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    .targets{display:grid;gap:10px}
    .target{display:flex;justify-content:space-between;align-items:center;border:1px dashed var(--line);border-radius:12px;padding:10px 12px;min-height:44px}
    .nutri{font-weight:600}
    .bins{display:flex;flex-wrap:wrap;gap:8px}
    .bin{user-select:none;border:1px solid var(--chip-border);background:var(--chip);border-radius:999px;padding:8px 12px;cursor:grab}
    .bin[draggable="true"]:active{cursor:grabbing}
    .bin.dragging{opacity:.6}
    .slot{min-width:72px;text-align:center;border:1px solid var(--line);border-radius:999px;padding:6px 10px;color:var(--muted);background:#fff}
    .slot.filled{color:var(--ink);background:#f8fafc}
    .result{margin-top:8px;font-weight:700;}
    .correct{color:var(--ok)}
    .incorrect{color:var(--err)}
    .explain{margin-top:4px;color:var(--muted);font-size:14px}
    .actions{display:flex;gap:10px;margin-top:12px}
    button{appearance:none;border:1px solid var(--line);background:#fff;border-radius:12px;padding:10px 16px;font-weight:700;cursor:pointer}
    button.primary{background:#111827;color:#fff;border-color:#111827}
    .gift{display:none;border:1px solid var(--line);border-radius:14px;background:#fff;padding:16px;margin-top:14px}
    .gift .big{font-size:16px;font-weight:800;margin-bottom:6px}
    .code{color:var(--code);font-weight:900;font-size:16px}
    .note{color:var(--note)}
    a.link{color:var(--link);text-decoration:none;border-bottom:1px solid #bae6fd}
    a.link:hover{opacity:.8}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ç”Ÿé…®é£²é£Ÿå°æ¸¬é©—</h1>
    <p class="lead">å…¨å°å°‡è§£é–å°ˆå±¬æŠ˜æ‰£ç¢¼ã€‚</p>

    <!-- Q1 å–®é¸é¡Œ -->
    <section class="card" id="q1" aria-labelledby="q1label">
      <div class="q-title" id="q1label">å•é¡Œ 1ï¼šç”Ÿé…®é£²é£Ÿçš„ä¸»è¦ä»£è¬ç‰¹å¾µæ˜¯ä»€éº¼ï¼Ÿ</div>
      <div class="choices" role="radiogroup" aria-labelledby="q1label">
        <label class="choice"><input type="radio" name="q1" value="A"> A. ä½¿ç”¨ç¢³æ°´åŒ–åˆç‰©ä½œç‚ºä¸»è¦èƒ½é‡ä¾†æº</label>
        <label class="choice"><input type="radio" name="q1" value="B"> B. ä½¿ç”¨è„‚è‚ªä½œç‚ºä¸»è¦èƒ½é‡ä¾†æº</label>
        <label class="choice"><input type="radio" name="q1" value="C"> C. ä½¿ç”¨è›‹ç™½è³ªä½œç‚ºä¸»è¦èƒ½é‡ä¾†æº</label>
        <label class="choice"><input type="radio" name="q1" value="D"> D. ä½¿ç”¨ç¶­ç”Ÿç´ ä½œç‚ºä¸»è¦èƒ½é‡ä¾†æº</label>
      </div>
      <div class="result" id="r1" aria-live="polite"></div>
      <div class="explain" id="e1"></div>
    </section>

    <!-- Q2 æ‹‰ç§»é…å°é¡Œ -->
    <section class="card" id="q2" aria-labelledby="q2label">
      <div class="q-title" id="q2label">å•é¡Œ 2ï¼ˆæ‹‰ç§»é…å°é¡Œï¼‰ï¼šå‚³çµ±ç”Ÿé…®é£²é£Ÿã€Œè›‹ç™½è³ªã€è„‚è‚ªã€ç¢³æ°´åŒ–åˆç‰©ã€æ¯”ä¾‹ï¼ˆæ‰‹æ©Ÿè«‹é•·æŒ‰å†æ‹–æ›³ï¼‰</div>

      <div class="drag-area">
        <div class="targets">
          <div class="target" data-accept="P">
            <span class="nutri">è›‹ç™½è³ª</span>
            <span class="slot" data-slot="P">æ‹–æ›³æ¯”ä¾‹è‡³æ­¤</span>
          </div>
          <div class="target" data-accept="F">
            <span class="nutri">è„‚è‚ª</span>
            <span class="slot" data-slot="F">æ‹–æ›³æ¯”ä¾‹è‡³æ­¤</span>
          </div>
          <div class="target" data-accept="C">
            <span class="nutri">ç¢³æ°´åŒ–åˆç‰©</span>
            <span class="slot" data-slot="C">æ‹–æ›³æ¯”ä¾‹è‡³æ­¤</span>
          </div>
        </div>
        <div class="bins" id="bins">
          <div class="bin" draggable="true" data-type="P">20%</div>
          <div class="bin" draggable="true" data-type="C">5%</div>
          <div class="bin" draggable="true" data-type="F">75%</div>
        </div>
        <div class="actions">
        <button id="reset-q2">é‡è¨­ç¬¬äºŒé¡Œ</button>
        </div>
      </div>

      <div class="result" id="r2" aria-live="polite"></div>
      <div class="explain" id="e2"></div>
    </section>

    <!-- Q3 æ˜¯éé¡Œï¼ˆå–®é¸ï¼‰ -->
    <section class="card" id="q3" aria-labelledby="q3label">
      <div class="q-title" id="q3label">å•é¡Œ 3ï¼šåœ¨åˆ†è§£è„‚è‚ªæ™‚ï¼Œé‚„æœƒç”¢ç”Ÿä»»ä½•çš„è‘¡è„ç³–å—ï¼Ÿ</div>
      <div class="choices" role="radiogroup" aria-labelledby="q3label">
        <label class="choice"><input type="radio" name="q3" value="Y"> æ˜¯</label>
        <label class="choice"><input type="radio" name="q3" value="N"> å¦</label>
      </div>
      <div class="result" id="r3" aria-live="polite"></div>
      <div class="explain" id="e3"></div>
    </section>

<div class="actions">
  <button class="primary" id="submit">æäº¤ä½œç­”</button>
</div>

    <!-- å…¨å°çå‹µå€å¡Š -->
    <section class="gift" id="gift">
      <div class="big">ğŸ‰ æ­å–œå…¨å°ï¼é€™æ˜¯ä½ çš„æŠ˜æ‰£ç¢¼ï¼š <span class="code">831883</span></div>
      <div class="note">ç„¡ä½¿ç”¨æœŸé™ï¼Œæ»¿999æŠ˜30</div>
      <div style="margin-top:6px"><a class="link" href="https://www.dgifood.com.tw/member_login.php?lang=tw" target="_blank" rel="noopener">é»æ­¤ä½¿ç”¨</a></div>
    </section>
  </div>

  <script>
    // ç­”æ¡ˆèˆ‡è§£æ
    const answers = {
      q1: 'B',
      q2: { P:'20%', F:'75%', C:'5%' },
      q3: 'Y'
    };
    const explains = {
      q1: 'ç”Ÿé…®ç‹€æ…‹ä»¥è„‚è‚ªä»£è¬ä¸¦ç”¢ç”Ÿé…®é«”ä¾›èƒ½ç‚ºä¸»ï¼Œé™ä½å°è‘¡è„ç³–çš„ä¾è³´ã€‚',
      q2: 'å‚³çµ±ç”Ÿé…®æ¯”ä¾‹ç‚ºè„‚è‚ªç´„ 75%ã€è›‹ç™½è³ªç´„ 20%ã€ç¢³æ°´ç´„ 5%ã€‚',
      q3: 'æœƒçš„ã€‚è„‚è‚ªåˆ†è§£ç”¢ç”Ÿçš„ç”˜æ²¹å¯ç¶“ç”±ç³–è³ªæ–°ç”Ÿè½‰åŒ–ç‚ºå°‘é‡è‘¡è„ç³–ã€‚'
    };

    // Q2 æ‹–æ›³é‚è¼¯ï¼ˆå«è¡Œå‹•è£ç½®é•·æŒ‰æ”¯æ´ï¼‰
const bins = document.querySelectorAll('.bin');
const slots = document.querySelectorAll('.slot');
let dragging = null;
let touchOffset = { x: 0, y: 0 };

function addBinHandlers(el) {
  // é›»è…¦æ‹–æ‹‰
  el.addEventListener('dragstart', e => {
    dragging = el;
    el.classList.add('dragging');
  });
  el.addEventListener('dragend', e => {
    dragging = null;
    el.classList.remove('dragging');
  });

  // æ‰‹æ©Ÿæ‹–æ‹‰
  el.addEventListener('touchstart', e => {
    dragging = el;
    el.classList.add('dragging');
    const touch = e.touches[0];
    const rect = el.getBoundingClientRect();
    touchOffset.x = touch.clientX - rect.left;
    touchOffset.y = touch.clientY - rect.top;
    el.style.position = 'absolute';
    el.style.zIndex = 1000;
    el.style.left = `${touch.clientX - touchOffset.x}px`;
    el.style.top = `${touch.clientY - touchOffset.y}px`;
  });

  el.addEventListener('touchmove', e => {
    e.preventDefault(); // é˜»æ­¢æ»¾å‹•
    if (!dragging) return;
    const touch = e.touches[0];
    dragging.style.left = `${touch.clientX - touchOffset.x}px`;
    dragging.style.top = `${touch.clientY - touchOffset.y}px`;
  }, { passive: false });

  el.addEventListener('touchend', e => {
    if (!dragging) return;
    let placed = false;
    const touch = e.changedTouches[0];

    slots.forEach(slot => {
      const target = slot.parentElement; // ç”¨ target div åˆ¤æ–·ç¯„åœ
      const rect = target.getBoundingClientRect();
      if (
        touch.clientX > rect.left && touch.clientX < rect.right &&
        touch.clientY > rect.top && touch.clientY < rect.bottom
      ) {
        // slot å…§å·²æœ‰å€¼å…ˆå› bins
        if (slot.classList.contains('filled')) {
          const old = document.createElement('div');
          old.className = 'bin';
          old.textContent = slot.textContent;
          old.setAttribute('draggable', 'true');
          old.dataset.type = slot.dataset.type || '';
          addBinHandlers(old);
          document.getElementById('bins').appendChild(old);
        }
        slot.textContent = dragging.textContent;
        slot.dataset.type = dragging.dataset.type;
        slot.classList.add('filled');
        placed = true;
      }
    });

    // è‹¥æœªæ”¾åˆ° slotï¼Œå›åˆ° bins
    if (!placed) {
      dragging.style.position = '';
      dragging.style.zIndex = '';
      dragging.style.left = '';
      dragging.style.top = '';
      document.getElementById('bins').appendChild(dragging);
    } else {
      dragging.remove();
    }
    dragging = null;
  });
}

// ç‚ºåˆå§‹ bins ç¶å®šäº‹ä»¶
document.querySelectorAll('.bin').forEach(bin => addBinHandlers(bin));

// è®“ slot ä¹Ÿå¯é»æ“Šå¾ªç’°å¡«å…¥ binï¼ˆæ–¹ä¾¿æ‰‹æ©Ÿï¼‰
slots.forEach(slot => {
  slot.addEventListener('click', () => {
    const pick = document.querySelector('.bin');
    if (!pick) return;
    slot.textContent = pick.textContent;
    slot.dataset.type = pick.dataset.type;
    slot.classList.add('filled');
    pick.remove();
  });
});


    // æäº¤ä½œç­”
    document.getElementById('submit').addEventListener('click', () => {
      let allCorrect = true;

      // Q1 è©•åˆ†
      const c1 = (document.querySelector('input[name="q1"]:checked')||{}).value;
      const r1 = document.getElementById('r1');
      const e1 = document.getElementById('e1');
      if (c1 === answers.q1){ r1.className='result correct'; r1.textContent='âœ” ç­”å°äº†ï¼'; e1.textContent = explains.q1; }
      else { r1.className='result incorrect'; r1.textContent='âœ– ç­”éŒ¯äº†'; e1.textContent=''; allCorrect = false; }

      // Q2 è©•åˆ†
      const getText = key => (document.querySelector(`.slot[data-slot="${key}"]`)||{}).textContent || '';
      const m = { P:getText('P').trim(), F:getText('F').trim(), C:getText('C').trim() };
      const r2 = document.getElementById('r2');
      const e2 = document.getElementById('e2');
      const ok2 = m.P === answers.q2.P && m.F === answers.q2.F && m.C === answers.q2.C;
      if (ok2){ r2.className='result correct'; r2.textContent='âœ” ç­”å°äº†ï¼'; e2.textContent = explains.q2; }
      else { r2.className='result incorrect'; r2.textContent='âœ– ç­”éŒ¯äº†'; e2.textContent=''; allCorrect = false; }

      // Q3 è©•åˆ†
      const c3 = (document.querySelector('input[name="q3"]:checked')||{}).value;
      const r3 = document.getElementById('r3');
      const e3 = document.getElementById('e3');
      if (c3 === answers.q3){ r3.className='result correct'; r3.textContent='âœ” ç­”å°äº†ï¼'; e3.textContent = explains.q3; }
      else { r3.className='result incorrect'; r3.textContent='âœ– ç­”éŒ¯äº†'; e3.textContent=''; allCorrect = false; }

      // å…¨å°é¡¯ç¤ºç¦®ç‰©
      document.getElementById('gift').style.display = allCorrect ? 'block' : 'none';
    });
    document.getElementById('reset-q2').addEventListener('click', () => {
  const slots = document.querySelectorAll('.slot');
  const binsContainer = document.getElementById('bins');
  const originalBins = [
    { type: 'P', text: '20%' },
    { type: 'F', text: '75%' },
    { type: 'C', text: '5%' }
  ];

  // æ¸…ç©º slots
  slots.forEach(slot => {
    slot.textContent = 'æ‹–æ›³æ¯”ä¾‹è‡³æ­¤';
    slot.dataset.type = '';
    slot.classList.remove('filled');
  });

  // æ¸…ç©º bins
  binsContainer.innerHTML = '';
  originalBins.forEach(b => {
    const bin = document.createElement('div');
    bin.className = 'bin';
    bin.textContent = b.text;
    bin.setAttribute('draggable','true');
    bin.dataset.type = b.type;
    addBinHandlers(bin);
    binsContainer.appendChild(bin);
  });

  // æ¸…ç©ºçµæœèˆ‡è§£æ
  document.getElementById('r2').textContent = '';
  document.getElementById('e2').textContent = '';
});


  </script>
</body>
</html>
